{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '46065959-261c5874db82aaa09dfa5c313';\n\nasync function fetchImages(query, page = 1) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`; \n  \n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw new Error('Error fetching images');\n  }\n}\n\nexport { fetchImages }; \n\n\n","import { fetchImages } from './js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loader = document.querySelector('.loader');\n\nlet query = '';\nlet page = 1;\nlet lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', onSearch);\n\nfunction onSearch(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.searchQuery.value.trim();\n\n  if (query === '') {\n    Notify.warning('Please enter a search query');\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  fetchAndRenderImages();\n}\n\nfunction fetchAndRenderImages() {\n  loader.classList.remove('hidden'); \n\n  fetchImages(query, page)\n    .then(data => {\n      if (data.hits.length === 0) {\n        Notify.failure('No images found. Try a different search query.');\n        return;\n      }\n\n      renderGallery(data.hits);\n      lightbox.refresh();\n\n      if (data.totalHits > page * 15) { \n        loadMoreBtn.classList.remove('hidden');\n      } else {\n        loadMoreBtn.classList.add('hidden');\n      }\n\n      if (page > 1) {\n        const { height: cardHeight } = document\n          .querySelector('.gallery')\n          .firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      Notify.failure('Something went wrong, please try again later.');\n    })\n    .finally(() => {\n      loader.classList.add('hidden'); \n    });\n}\n\nloadMoreBtn.addEventListener('click', () => {\n  page += 1;\n  fetchAndRenderImages();\n});\n\nfunction renderGallery(images) {\n  const markup = images\n    .map(image => {\n      return `\n        <li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          </a>\n        </li>\n      `;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","url","axios","error","form","gallery","loadMoreBtn","loader","lightbox","SimpleLightbox","onSearch","event","Notify","clearGallery","fetchAndRenderImages","data","renderGallery","cardHeight","images","markup","image"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAEhB,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAC1C,MAAMC,EAAM,GAAGL,CAAQ,QAAQC,CAAO,MAAM,mBAAmBE,CAAK,CAAC,6EAA6EC,CAAI,GAEtJ,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvC,IAAI,MAAM,uBAAuB,CACxC,CACH,CCVA,MAAMC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIR,EAAQ,GACRC,EAAO,EACPQ,EAAW,IAAIC,EAAe,YAAY,EAE9CL,EAAK,iBAAiB,SAAUM,CAAQ,EAExC,SAASA,EAASC,EAAO,CAIvB,GAHAA,EAAM,eAAc,EACpBZ,EAAQY,EAAM,cAAc,SAAS,YAAY,MAAM,OAEnDZ,IAAU,GAAI,CAChBa,SAAO,QAAQ,6BAA6B,EAC5C,MACD,CAEDZ,EAAO,EACPa,IACAC,GACF,CAEA,SAASA,GAAuB,CAC9BP,EAAO,UAAU,OAAO,QAAQ,EAEhCT,EAAYC,EAAOC,CAAI,EACpB,KAAKe,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BH,SAAO,QAAQ,gDAAgD,EAC/D,MACD,CAWD,GATAI,EAAcD,EAAK,IAAI,EACvBP,EAAS,QAAO,EAEZO,EAAK,UAAYf,EAAO,GAC1BM,EAAY,UAAU,OAAO,QAAQ,EAErCA,EAAY,UAAU,IAAI,QAAQ,EAGhCN,EAAO,EAAG,CACZ,KAAM,CAAE,OAAQiB,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACpB,CAAS,CACF,CACP,CAAK,EACA,MAAMd,GAAS,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CS,SAAO,QAAQ,+CAA+C,CACpE,CAAK,EACA,QAAQ,IAAM,CACbL,EAAO,UAAU,IAAI,QAAQ,CACnC,CAAK,CACL,CAEAD,EAAY,iBAAiB,QAAS,IAAM,CAC1CN,GAAQ,EACRc,GACF,CAAC,EAED,SAASE,EAAcE,EAAQ,CAC7B,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA;AAAA,qBAEQA,EAAM,aAAa;AAAA,wBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,OAIzD,EACA,KAAK,EAAE,EACVf,EAAQ,mBAAmB,YAAac,CAAM,CAChD,CAEA,SAASN,GAAe,CACtBR,EAAQ,UAAY,EACtB"}